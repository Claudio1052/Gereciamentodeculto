<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão Verbo da Vida - Zona Leste</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --primary-color: #004aad; /* Azul Verbo */
            --secondary-color: #f8f9fa;
            --accent-color: #e63946;
        }
        body { background-color: #f4f6f9; font-family: 'Segoe UI', sans-serif; }
        
        /* Sidebar */
        .sidebar {
            height: 100vh;
            background-color: var(--primary-color);
            color: white;
            position: fixed;
            width: 250px;
            padding-top: 20px;
        }
        .sidebar h3 { font-size: 1.2rem; text-align: center; margin-bottom: 30px; font-weight: bold; }
        .sidebar a {
            padding: 15px 25px;
            text-decoration: none;
            font-size: 1rem;
            color: rgba(255,255,255,0.8);
            display: block;
            transition: 0.3s;
        }
        .sidebar a:hover, .sidebar a.active { background-color: rgba(255,255,255,0.2); color: white; border-left: 5px solid white; }
        
        /* Content */
        .content { margin-left: 250px; padding: 30px; }
        
        /* Cards Dashboard */
        .card-dash { border: none; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); transition: transform 0.2s; }
        .card-dash:hover { transform: translateY(-5px); }
        .icon-box { font-size: 2rem; opacity: 0.8; }
        
        /* Forms */
        .form-section { background: white; padding: 25px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); display: none; }
        .form-section.active { display: block; }
        
        .btn-custom { background-color: var(--primary-color); color: white; }
        .btn-custom:hover { background-color: #003380; color: white; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h3><i class="fas fa-church"></i> Verbo da Vida<br><small style="font-size: 0.7em;">Zona Leste</small></h3>
        <a href="#" onclick="showSection('dashboard', this)" class="active"><i class="fas fa-chart-line me-2"></i> Dashboard</a>
        <a href="#" onclick="showSection('cultos', this)"><i class="fas fa-calendar-alt me-2"></i> Gerenciar Culto</a>
        <a href="#" onclick="showSection('membros', this)"><i class="fas fa-users me-2"></i> Membros</a>
    </div>

    <div class="content">
        
        <div id="dashboard" class="form-section active">
            <h2 class="mb-4">Visão Geral da Igreja</h2>
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card card-dash bg-primary text-white p-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6>Total Membros</h6>
                                <h3 id="dash-total-membros">0</h3>
                            </div>
                            <i class="fas fa-users icon-box"></i>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card card-dash bg-success text-white p-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6>Média Públicio</h6>
                                <h3 id="dash-media-culto">0</h3>
                            </div>
                            <i class="fas fa-chair icon-box"></i>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card card-dash bg-warning text-dark p-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6>Aniversariantes (Mês)</h6>
                                <h3 id="dash-niver">0</h3>
                            </div>
                            <i class="fas fa-birthday-cake icon-box"></i>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card card-dash bg-info text-white p-3">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h6>Graduados Rhema</h6>
                                <h3 id="dash-rhema">0</h3>
                            </div>
                            <i class="fas fa-graduation-cap icon-box"></i>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-8">
                    <div class="card p-3">
                        <h5>Frequência nos Cultos</h5>
                        <canvas id="chartFrequencia"></canvas>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card p-3">
                        <h5>Demografia (Último Culto)</h5>
                        <canvas id="chartDemografia"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <div id="cultos" class="form-section">
            <h2 class="mb-4">Relatório de Culto</h2>
            <form id="formCulto">
                <div class="row g-3">
                    <div class="col-md-3">
                        <label class="form-label">Data</label>
                        <input type="date" class="form-control" required>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Início</label>
                        <input type="time" class="form-control" required>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Término</label>
                        <input type="time" class="form-control" required>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Ministro (Preletor)</label>
                        <input type="text" class="form-control" placeholder="Nome do Ministro">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Dirigente</label>
                        <input type="text" class="form-control" placeholder="Nome do Dirigente">
                    </div>
                    
                    <hr>
                    <h5>Métricas de Pessoas</h5>
                    <div class="col-md-4">
                        <label class="form-label">Homens</label>
                        <input type="number" class="form-control" id="qtd_homens" onchange="calcTotal()">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Mulheres</label>
                        <input type="number" class="form-control" id="qtd_mulheres" onchange="calcTotal()">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Crianças</label>
                        <input type="number" class="form-control" id="qtd_criancas" onchange="calcTotal()">
                    </div>
                    <div class="col-md-12">
                        <div class="alert alert-info">Total de Presentes: <strong id="total_presentes">0</strong></div>
                    </div>

                    <hr>
                    <h5>Tempos (Minutos)</h5>
                    <div class="col-md-6">
                        <label class="form-label">Tempo de Ministração</label>
                        <input type="number" class="form-control" placeholder="Ex: 50">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Tempo do Dirigente</label>
                        <input type="number" class="form-control" placeholder="Ex: 20">
                    </div>

                    <div class="col-12 text-end">
                        <button type="submit" class="btn btn-custom btn-lg"><i class="fas fa-save"></i> Salvar Relatório</button>
                    </div>
                </div>
            </form>
        </div>

        <div id="membros" class="form-section">
            <h2 class="mb-4">Cadastro de Membros</h2>
            
            <div class="card p-3 mb-4 bg-light">
                <div class="row g-2 align-items-end">
                    <div class="col-md-4">
                        <label>Buscar Membro</label>
                        <input type="text" class="form-control" placeholder="Nome, CEP ou Telefone...">
                    </div>
                    <div class="col-md-3">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="filterNiver">
                            <label class="form-check-label" for="filterNiver">Aniversariantes do Mês</label>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <button class="btn btn-secondary w-100">Filtrar</button>
                    </div>
                </div>
            </div>

            <form id="formMembro">
                <div class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Nome Completo</label>
                        <input type="text" class="form-control" required>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Data de Nascimento</label>
                        <input type="date" class="form-control" required>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Telefone (WhatsApp)</label>
                        <input type="text" class="form-control" placeholder="(11) 99999-9999">
                    </div>

                    <div class="col-md-3">
                        <label class="form-label">CEP</label>
                        <input type="text" id="cep" class="form-control" placeholder="00000-000" onblur="buscaCep()">
                    </div>
                    <div class="col-md-5">
                        <label class="form-label">Endereço</label>
                        <input type="text" id="endereco" class="form-control" readonly>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Número</label>
                        <input type="text" class="form-control">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Bairro</label>
                        <input type="text" id="bairro" class="form-control" readonly>
                    </div>

                    <div class="col-12">
                        <label class="form-label fw-bold">Formação Eclesiástica:</label>
                        <div class="d-flex gap-4">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="rhema">
                                <label class="form-check-label" for="rhema">Graduado Rhema</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="ministros">
                                <label class="form-check-label" for="ministros">Escola de Ministros</label>
                            </div>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="missoes">
                                <label class="form-check-label" for="missoes">Escola de Missões</label>
                            </div>
                        </div>
                    </div>

                    <div class="col-12 text-end mt-4">
                        <button type="submit" class="btn btn-custom btn-lg"><i class="fas fa-user-plus"></i> Cadastrar Membro</button>
                    </div>
                </div>
            </form>
            
            <h5 class="mt-5">Lista Recente</h5>
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                        <tr><th>Nome</th><th>Telefone</th><th>Bairro</th><th>Rhema?</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>Exemplo Silva</td><td>(11) 99999-9999</td><td>Tatuapé</td><td><span class="badge bg-success">Sim</span></td></tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <script>
        // Lógica de Navegação
        function showSection(id, element) {
            document.querySelectorAll('.form-section').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.sidebar a').forEach(el => el.classList.remove('active'));
            element.classList.add('active');
        }

        // Busca CEP Inteligente (ViaCEP)
        function buscaCep() {
            let cep = document.getElementById('cep').value.replace(/\D/g, '');
            if (cep != "") {
                let script = document.createElement('script');
                script.src = 'https://viacep.com.br/ws/'+ cep + '/json/?callback=meu_callback';
                document.body.appendChild(script);
            }
        }
        function meu_callback(conteudo) {
            if (!("erro" in conteudo)) {
                document.getElementById('endereco').value = (conteudo.logradouro);
                document.getElementById('bairro').value = (conteudo.bairro);
            } else {
                alert("CEP não encontrado.");
            }
        }

        // Calcular Totais do Culto em Tempo Real
        function calcTotal() {
            let h = parseInt(document.getElementById('qtd_homens').value) || 0;
            let m = parseInt(document.getElementById('qtd_mulheres').value) || 0;
            let c = parseInt(document.getElementById('qtd_criancas').value) || 0;
            document.getElementById('total_presentes').innerText = h + m + c;
        }

        // Inicializar Gráficos Mockados (Exemplo)
        window.onload = function() {
            const ctx1 = document.getElementById('chartFrequencia').getContext('2d');
            new Chart(ctx1, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai'],
                    datasets: [{
                        label: 'Pessoas por Culto',
                        data: [120, 135, 110, 145, 160],
                        borderColor: '#004aad',
                        tension: 0.1
                    }]
                }
            });

            const ctx2 = document.getElementById('chartDemografia').getContext('2d');
            new Chart(ctx2, {
                type: 'doughnut',
                data: {
                    labels: ['Homens', 'Mulheres', 'Crianças'],
                    datasets: [{
                        data: [50, 80, 20],
                        backgroundColor: ['#004aad', '#e63946', '#f1faee']
                    }]
                }
            });
            
            // Simular dados no dashboard
            document.getElementById('dash-total-membros').innerText = "350";
            document.getElementById('dash-media-culto').innerText = "142";
            document.getElementById('dash-niver').innerText = "12";
            document.getElementById('dash-rhema').innerText = "85";
        }
        
        // Exemplo de alerta ao salvar (simulação)
        document.getElementById('formMembro').onsubmit = function(e) {
            e.preventDefault();
            alert("Membro cadastrado com sucesso! (Simulação Visual)");
        }
    </script>
</body>
</html>
